<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admitted</title>
  <link rel="stylesheet" href="commonStyles.css" />
</head>

<body>
  <div id="links">
    <div><a href="index.html">Home</a></div>
    <div><a href="applied.html">Applied Jobs</a></div>
    <div><a href="bookmark.html">Bookmarks</a></div>
  </div>
  <main>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Email</th>
          <th>Job Applied</th>
          <th>Salary</th>
          <th>Delete</th>
        </tr>
      </thead>
      <tbody id="tbody">

      </tbody>
      <p class="sumAll"></p>
    </table>
  </main>
</body>
<script>

  var getBookData = JSON.parse(localStorage.getItem('bookmarks')) || [];

  function render() {
    tbody.innerHTML = "";

    getBookData.forEach(function (elem, index) {
      var tr = document.createElement('tr');

      var td1 = document.createElement('td');
      td1.innerText = elem.emplyName;

      var td2 = document.createElement('td');
      td2.innerText = elem.emplyEmail;

      var td3 = document.createElement('td');
      td3.innerText = elem.emplyRole;

      var td4 = document.createElement('td')
      td4.innerText = elem.emplySalary;

      var td5 = document.createElement('td')
      var delBtn = document.createElement('button');
      delBtn.textContent = 'Delete';
      delBtn.className = 'del-btn';
      delBtn.setAttribute('data-index', index)
      td5.append(delBtn)

      tr.append(td1, td2, td3, td4, td5);

      document.querySelector('#tbody').append(tr);

    });




  }

  tbody.addEventListener('click', function (e) {
    if (e.target.classList.contains('del-btn')) { 
      const idx = Number(e.target.getAttribute('data-index')); 
      getBookData.splice(idx,1)
      localStorage.setItem('bookmarks',JSON.stringify(getBookData));
      render();
    }
  })




  // tbody.addEventListener('click', function (e) {
  //   if (e.target.classList.contains('del-btn')) {
  //     const idx = Number(e.target.getAttribute('data-index'));
  //     // Remove from array
  //     getBookData.splice(idx, 1);
  //     // Persist change
  //     localStorage.setItem('bookmarks', JSON.stringify(getBookData));
  //     // Re-render
  //     render();
  //   }
  // });

  // Initial render
  render();

</script>

</html>